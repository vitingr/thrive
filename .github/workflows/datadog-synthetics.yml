name: Run Datadog Synthetic tests

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:
  build:
    runs-on: ubuntu-latest
    environment: environment_variables

    steps:
    - uses: actions/checkout@v4

    - name: Run Datadog Synthetic tests
      uses: DataDog/synthetics-ci-github-action@f5ac3ded81a527d15f03d1084eb2ade49b935791
      with:
        api_key: ${{secrets.DD_API_KEY}}
        app_key: ${{secrets.DD_APP_KEY}}
        test_search_query: 'tag:e2e-tests'


